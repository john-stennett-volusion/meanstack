{"version":3,"sources":["models.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,WAAW,QAAQ,UAAR,CAAf;AACA,IAAI,IAAW,QAAQ,YAAR,CAAf;;AAEA,OAAO,OAAP,GAAkB,MAAD,IAAY;AAC5B,KAAI,SAAS,UAAT,CAAoB,UAApB,IAAkC,CAAtC,EAAyC;AACxC,WAAS,OAAT,CAAiB,gCAAjB;AACA;;AAED,KAAI,QAAJ;AACA,KAAI,OAAJ;AACA,KAAI,IAAJ;;AAEA,KAAI,SAAS,MAAT,CAAgB,QAApB,EAA8B;AAC7B,aAAW,SAAS,KAAT,CAAe,UAAf,CAAX;AACA,EAFD,MAEO;AACN,aAAW,SAAS,KAAT,CAAe,UAAf,EAA2B,QAAQ,cAAR,CAA3B,EAAoD,YAApD,CAAX;AACA;;AAED,KAAI,SAAS,MAAT,CAAgB,OAApB,EAA6B;AAC5B,YAAU,SAAS,KAAT,CAAe,SAAf,CAAV;AACA,EAFD,MAEO;AACN,YAAU,SAAS,KAAT,CAAe,SAAf,EAA0B,QAAQ,YAAR,CAA1B,EAAiD,UAAjD,CAAV;AACA;;AAED,KAAI,SAAS,MAAT,CAAgB,IAApB,EAA0B;AACzB,SAAO,SAAS,KAAT,CAAe,MAAf,CAAP;AACA,EAFD,MAEO;AACN,SAAO,SAAS,KAAT,CAAe,MAAf,EAAuB,QAAQ,SAAR,CAAvB,EAA2C,OAA3C,CAAP;AACA;;AAED,KAAI,SAAS;AACZ,YAAU,QADE;AAEZ,WAAS,OAFG;AAGZ,QAAM;AAHM,EAAb;;;AAOA,GAAE,IAAF,CAAO,MAAP,EAAe,CAAC,KAAD,EAAQ,GAAR,KAAgB;AAC9B,SAAO,OAAO,OAAP,CAAe,GAAf,EAAqB,KAAD,IAAW;AACrC,UAAO,KAAP;AACA,GAFM,CAAP;AAGA,EAJD;;AAMA,QAAO,MAAP;AACA,CAzCD","file":"models-compiled.js","sourcesContent":["'use strict';\n\nlet mongoose = require('mongoose');\nlet _        = require('underscore');\n\nmodule.exports = (wagner) => {\n\tif (mongoose.connection.readyState == 0) {\n\t\tmongoose.connect('mongodb://localhost:27017/test');\n\t}\n\n\tlet Category;\n\tlet Product;\n\tlet User;\n\n\tif (mongoose.models.Category) {\n\t\tCategory = mongoose.model('Category');\n\t} else {\n\t\tCategory = mongoose.model('Category', require('./categories'), 'categories');\n\t}\n\n\tif (mongoose.models.Product) {\n\t\tProduct = mongoose.model('Product');\n\t} else {\n\t\tProduct = mongoose.model('Product', require('./products'), 'products');\n\t}\n\n\tif (mongoose.models.User) {\n\t\tUser = mongoose.model('User');\n\t} else {\n\t\tUser = mongoose.model('User', require('./users'), 'users');\n\t}\n\n\tlet models = {\n\t\tCategory: Category,\n\t\tProduct: Product,\n\t\tUser: User\n\t};\n\n\t// To ensure DRY-ness, register factories in a loop\n\t_.each(models, (value, key) => {\n\t\treturn wagner.factory(key, (stuff) => {\n\t\t\treturn stuff;\n\t\t});\n\t});\n\n\treturn models;\n};"]}